/*
 ╔═════════════════════════════════════════════════════════════════════════╗
 ║          Галактика (с) 1995, 2002 TOP SOFT Ltd., Новый АТЛАНТ           ║
 ║  Версия :     5.8+                                                      ║
 ║  Разработал:  Станевич Юрий                                             ║
 ║  Назначение:  Окно с подробной информацией по штрафам                   ║
 ╚═════════════════════════════════════════════════════════════════════════╝
*/

Window wiShtraf 'Штрафные санкции'
  ('Просмотр и изменение штрафных санкций',hcDogSatisfaction,sci1Esc)
  DoAccept, EscClose ;
  Show at (,, 52, 19)

Screen scShtrafOtg;
  Show At (,1,,9);
  Table KLShtraf;

  Bevel b1 { 0, 1, 0, 1, bsLowered, bsHorizontal };

Fields
  'Штрафные санкции за несвоевременную отгрузку': skip, Centered,
    { Font = { Bold = true; Color = ColorSysYellow; BackColor = ColorSysBlue } };
  KLShtraf.Name     ('Наименование штрафа',,sci13Esc) : protect ;
  KLShtraf.Neust    ('Процент неустойки') : [5.2], protect ;
  KLShtraf.MaxNeust ('Максимальная сумма штрафа в Базовой валюте') : [10.2], protect ;
  KLShtraf.PenyN    ('Пени в процентах за день просрочки') : [3.2], protect ;
  KLShtraf.KolDn    ('Количество дней применения первой пени') : protect,
    {Font = {BackColor = if ( (KlShtraf.KolDn < 0.0000001) and (KlShtraf.penyk > 0.0000001), ColorError, 0)}};
  KLShtraf.PenyK    ('Процент второй пени (начисляется после истечения действия первой)') : [3.2], protect,
    {Font = {BackColor = if ( (KlShtraf.KolDn > 0.0000001) and (KlShtraf.penyk < 0.0000001), ColorError, 0)}};
  KLShtraf.MaxShtraf('Максимальный процент штрафа') : [5.2], protect ;
<<
 .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

`Штраф`.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
`Процент неустойки`                      .@@@@@@@@%
`Макс.сумма штрафа в Базовой валюте`.@@@@@@@@@@@@@
`Процент первой пени`                    .@@@@@@@@%
`Количество дней применения первой пени` .@@@@@@@@
`Процент второй пени`                    .@@@@@@@@%
`Максимальный процент штрафа`            .@@@@@@@@%
>>
end;

Screen scShtrafOtgRefin;
  Show At (,1,,9);
  Table KLShtraf;

  Bevel b1 { 0, 1, 0, 1, bsLowered, bsHorizontal };

Fields
  'Штрафные санкции за несвоевременную отгрузку': skip, Centered,
    { Font = { Bold = true; Color = ColorSysYellow; BackColor = ColorSysBlue } };
  KLShtraf.Name     ('Наименование штрафа',,sci13Esc) : protect ;
  KLShtraf.Neust    ('Процент неустойки') : [5.2], protect ;
  KLShtraf.MaxNeust ('Максимальная сумма штрафа') : [10.2], protect ;
  KLShtraf.PenyN    ('Пени в процентах за день просрочки') : [10.2], NoProtect;
  KLShtraf.PenyK    ('Коэффициент, умножающийся на ставку рефинансирования, результат прибавляется к проценту пени') : [8.2], protect;
  KLShtraf.MaxShtraf('Максимальный процент штрафа') : [5.2], protect ;
<<
 .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@


`Штраф`.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
`Процент неустойки`                      .@@@@@@@@%
`Макс.сумма штрафа в Базовой валюте`.@@@@@@@@@@@@@
`% пени`.@@@@@@@`коэффиц.`.@@@@@@@ к ставке рефин.
`Максимальный процент штрафа`            .@@@@@@@@%
>>
end;

//-------------------------------------------------------------------------

Screen scShtrafPlt;
  Show At (,10,,18);
  Table KLShtrafPlat;

  Bevel b1 { 0, 1, 0, 1, bsLowered, bsHorizontal };

Fields
  'Штрафные санкции за несвоевременные платежи': skip, Centered,
    { Font = { Bold = true; Color = ColorSysYellow; BackColor = ColorSysBlue } };
  KLShtrafPlat.Name     ('Наименование штрафа',,sci13Esc) : protect ;
  KLShtrafPlat.Neust    ('Процент неустойки') : [5.2], protect ;
  KLShtrafPlat.MaxNeust ('Максимальная сумма штрафа в Базовой валюте') : [10.2], protect ;
  KLShtrafPlat.PenyN    ('Пени в процентах за день просрочки') : [3.2], protect ;
  KLShtrafPlat.KolDn    ('Количество дней применения первой пени') : protect,
    {Font = {BackColor = if ( (KlShtrafPlat.KolDn < 0.0000001) and (KlShtrafPlat.penyk > 0.0000001), ColorError, 0)}};
  KLShtrafPlat.PenyK    ('Процент второй пени (начисляется после истечения действия первой)') : [3.2], protect,
    {Font = {BackColor = if ( (KlShtrafPlat.KolDn > 0.0000001) and (KlShtrafPlat.penyk < 0.0000001), ColorError, 0)}};
  KLShtrafPlat.MaxShtraf('Максимальный процент штрафа') : [5.2], protect ;
<<
 .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

`Штраф`.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
`Процент неустойки`                      .@@@@@@@@%
`Макс.сумма штрафа в Базовой валюте`.@@@@@@@@@@@@@
`Процент первой пени`                    .@@@@@@@@%
`Количество дней применения первой пени` .@@@@@@@@
`Процент второй пени`                    .@@@@@@@@%
`Максимальный процент штрафа`            .@@@@@@@@%
>>
end ; // Screen

Screen scShtrafPltRefin;
  Show At (,10,,18);
  Table KLShtrafPlat;

  Bevel b1 { 0, 1, 0, 1, bsLowered, bsHorizontal };

Fields
  'Штрафные санкции за несвоевременные платежи': skip, Centered,
    { Font = { Bold = true; Color = ColorSysYellow; BackColor = ColorSysBlue } };
  KLShtrafPlat.Name     ('Наименование штрафа',,sci13Esc) : protect ;
  KLShtrafPlat.Neust    ('Процент неустойки') : [5.2], protect ;
  KLShtrafPlat.MaxNeust ('Максимальная сумма штрафа в Базовой валюте') : [10.2], protect ;
  KLShtrafPlat.PenyN    ('Пени в процентах за день просрочки') : [10.2], NoProtect;
  KLShtrafPlat.PenyK    ('Коэффициент, умножающийся на ставку рефинансирования, результат прибавляется к проценту пени') : [8.2], protect;
  KLShtrafPlat.MaxShtraf('Максимальный процент штрафа') : [5.2], protect ;
<<
 .@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@


`Штраф`.@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
`Процент неустойки`                      .@@@@@@@@%
`Макс.сумма штрафа в Базовой валюте`.@@@@@@@@@@@@@
`% пени`.@@@@@@@`коэффиц.`.@@@@@@@ к ставке рефин.
`Максимальный процент штрафа`            .@@@@@@@@%
>>
end ; // Screen

//-------------------------------------------------------------------------

#include GetShtra.vpp

//-------------------------------------------------------------------------

procedure TuneOtgFormat;
{
  ConvertRefin(KLShtraf.Buffer);
  if (KLShtraf.KolDn = -1)
    SetFormat(scShtrafOtgRefin);
  else
    SetFormat(scShtrafOtg);
  RereadRecord(#KLShtraf);
}

procedure TuneOplFormat;
{
  ConvertRefin(KLShtrafPlat.Buffer);
  if (KLShtrafPlat.KolDn = -1)
    SetFormat(scShtrafPltRefin);
  else
    SetFormat(scShtrafPlt);
  RereadRecord(#KLShtrafPlat);
}

procedure TuneShtrafFormat;
{
  TuneOtgFormat;
  TuneOplFormat;
}

handleEvent

cmInit: TuneShtrafFormat;

end;
end ; // Window wiShtraf
