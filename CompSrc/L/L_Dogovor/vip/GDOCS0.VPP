
!#ifndef _GDOCS0_VPP
!#define _GDOCS0_VPP
! Таблица в памяти для интерфейсов getdocs#.vip


Table STRUCT SGetDocs "Таблица в памяти для дерева договоров"
!With Replace
!With TableOptions NoProtect
  (
  NRec        : comp       ,
  cOwner      : comp       "Владелец уровня",
  cOwnerPlan  : comp       "Владелец уровня КП",
  isLeaf      : word       "0-папка; 1-лист",
  wDocType    : word       "1-договор; 2-соглашение; 4-кал.план",
  TipMoney    : word       "тип договора по отношению к валюте",
  cDogovor    : comp       "NRec Dogovor",
  cAppDogovor : comp       "NRec AppDogovor",
  cCalPlan    : comp       "NRec CalPlan", // т.к. они дублируются с NRec Dogovor
  cNazna      : comp       "Назначение ссылка",
  DogVal      : string[6]  "Валюта документа",
  Summa       : double     "Сумма по документу",
  DesGr       : string[4]  "Код группы пользователей",
  Descr       : string[20] "Дескриптор(идентификатор) пользователя",
  dBeg        : date       "Дата начала действия договора",
  dDoc        : date       "Дата заключения договора",
  dEnd        : date       "Дата окончания действия договора",
  NoDoc       : string[20] "Номер документа <внутренний>",
  NoDoc_Ext   : string[20] "Номер документа <внешний>",
  cMyOrg      : comp       "Ссылка на контрагента 1",
  cOrg        : comp       "Ссылка на контрагента 2",
  cNote       : comp       "Ссылка на пояснение по статусу",
  cPlat       : comp       "Ссылка на плательщика",
  cPol        : comp       "Ссылка на получателя платежа",
  cOtvPodr    : comp       "Ссылка на ответственное подразделение",
  cCurPodr    : comp       "Ссылка на курирующее подразделение",
  DopProc     : double     "Процент к курсу на момент оплаты",

  cVidDog     : comp       "Ссылка на вид договора",
  Status      : word       "Статус документа",
  Direct      : word       "Направление потоков товаров и услуг",
  IsFinPKP    : boolean    "true - финансовый ПКП",
  VidPlan     : word       "0-договор;1-товарный КП;2-финансовый КП",
  cZamena     : comp       "Ссылка на отменяемый документ",
  cShtrafPlat : comp       "Ссылка на штрафные санкции по плат",
  cShtrafShip : comp       "Ссылка на штрафные санкции по отгр",
  cAktSver    : comp       "Ссылка на дог. для подцепки актов св-ки",
  cPriceLs    : comp       "Ссылка на прайс-лист",
  cVal        : comp       "Валюта договора",
  cValRas     : comp       "Ссылка на валюту взаимозачетов",
  scurDirect  : string[10] "Направление по сформированным документам",
  dValCurse   : date       "Дата курса валюты",
  MethodPrice : word       "Методика определения цены",
  VhodNal     : word       "Входимость налогов",
  MaxDebts    : double     "Максимальная задолж контрагента",

  TekDebts    : double     "Текущая задолж контрагента",

  NeedDel     : word       "1-запись нужно удалить сразу",
  TiDK        : word       "TIdk",
  DogName     : string[100]"Наименование договора",
  DocName     : string[100]"Наименование документа"
  )
With Index
  (
  SMemTab01 = NRec (Surrogate, Unique) + wDocType,
  SMemTab02 = cOwner + wDocType + dDoc + NoDoc,
  SMemTab12 = cOwner + cOwnerPlan + wDocType + dDoc + NoDoc,
  SMemTab22 = cOwnerPlan,
  SMemTab03 = cCalPlan,
  SMemTab04 = NeedDel,
  SMemTab05 = wDocType,
  SMemTab06 = cOwner + wDocType + NoDoc + dDoc
  );

#ifdef GetDocs2_VIP
Table STRUCT SGetDocsZam "Таблица в памяти для дерева договоров 2"
(
  cDogovor: comp       "Ссылка на документ",
  Ind     : longint    "Для сортировки",
  NameDog : string[20] "Описание договора"
)
With Index
  (
  SMemTab201 = cDogovor + Ind
  );
#end // GetDocs2_VIP

!#end // _GDOCS0_VPP
