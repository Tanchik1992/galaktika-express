!╔════════════════════════════════════════════════════════════════════════════╗
!║ Разработал :  Макс Голдин                                                  ║
!║ Назначение :  Реестр Свободных розничных цен в Накладной на реализацию     ║
!╚════════════════════════════════════════════════════════════════════════════╝


!******************************************************************************
!******************************************************************************
!******************************************************************************
#doc
Реестр свободных розничных цен
#end
.LinkForm 'Reestr1' prototype is 'tip_nakl_TH2_RZ'
.NameInList '1. Реестр свободных розничных цен'
.Group 'Reestr'
.Set Filler = '-'
.p 55
.Defo LandScape
.var
  NomPp :Double
.endvar
.fields
  CommonFormHeader

  Номер_накладной
  DateToStr(Дата_накладной,'DD/MM/YYYY г.')

  плательщик  + if(плательщик_Банк  <> '', '; ' + плательщик_Банк,  '')

  Номер_договора
  DateToStr(Дата_договора,'DD/MM/YYYY г.')

!.{
   NomPp
   баркод
   наименование_мц
   учет_ед

   DoubleToStr(кол_общее, Kol_Pr)

   DoubleToStr(цена_первая, Cena_Pr)
   оптовая_надбавка
   DoubleToStr(цена_учетная, Cena_Pr)
   розничная_надбавка
   DoubleToStr(цена_розничная, Cena_Pr)
   налог_с_продажи
   DoubleToStr(цена_продажная, Cena_Pr)
!.}

  NomPp
  DoubleToStr(NomPp, '4\f')
.endfields
.begin
  NomPp := 0
end.
 Б^ Б
 Б                                               РЕЕСТР Б
 И                               розничных цен по накладной N°  Б^ Б от  Б^ Й
 И                               покупатель Ш @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Р
 И                               договор N°  Б^ Б от  Б^ Й



.{
.[h
 Р───┬────────────────┬───────────────────────────────────┬─────────┬────────────────┬────────────────┬──────┬────────────────┬──────┬────────────────┬──────┬──────────────── Р
 Р N │ Номенклатурный │        Наименование товара        │ Единица │    Объем       │ Свободная цена │ Опт. │Свободная цена  │ Розн.│Розничная цена  │Налог │Продажная цена   Р
 Рп/п│  номер товара  │                                   │измерения│    партии      │ поставщика     │надбав│поступления     │надбав│                │с прод│                 Р
 Р───┴────────────────┴───────────────────────────────────┴─────────┴────────────────┴────────────────┴──────┴────────────────┴──────┴────────────────┴──────┴──────────────── Р
.]h
.begin
  NomPp :=NomPp + 1
end.
 Р&&& @@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @~@@@@@@@ &#'&&&&&&&&&&&&& &#'&&&&&&&&&&&&& &#&.&& &#'&&&&&&&&&&&&& &#&.&& &#'&&&&&&&&&&&&& &#&.&& &#'&&&&&&&&&&&&& Р
.}
 Р ........................................................................................................................................................................... Р
 Итого позиций:  Б^ (^) Б
.endform



!******************************************************************************
!******************************************************************************
!******************************************************************************
#doc
Реестр свободных розничных цен (с НДС)
#end
.LinkForm 'Reestr2' prototype is 'tip_nakl_TH2_RZ'
.NameInList '2. Реестр свободных розничных цен (с НДС)'
.Group 'Reestr'
.Set Filler = '-'
.p 55
.Defo LandScape
.var
  NomPp :Double
.endvar
.fields
  CommonFormHeader

  Номер_накладной
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'DD'), '')
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'mon'), '')
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'YYYY'), God)

  плательщик  + if(плательщик_Банк  <> '', '; ' + плательщик_Банк,  '')

  if(Номер_договора <> '', Номер_договора, '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'DD'), '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'mon'), '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'YYYY'), God)
!.{
   NomPp
   баркод
   наименование_мц
   учет_ед

   DoubleToStr(кол_общее, Kol_Pr)

   DoubleToStr(цена_первая, Cena_Pr)
   оптовая_надбавка
   DoubleToStr(цена_учетная, Cena_Pr)
   розничная_надбавка
   DoubleToStr(цена_розничная, Cena_Pr)

   cтавка_НДС
   DoubleToStr(cумма_исход_НДС / кол_общее, Cena_Pr)

   налог_с_продажи
   DoubleToStr(цена_продажная, Cena_Pr)
!.}

  NomPp
  DoubleToStr(NomPp, '4\f')
.endfields
.begin
  NomPp := 0
end.
^
 Б                                               РЕЕСТР Б
 И                               розничных цен по накладной N° З@@@@@@@@@@ З от " З@@ З"  З@~@@@@@@ З  Б@@@@ г. Й
 И                               покупатель  Ч@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Я
 И                               договор N° З@@@@@@@@@@ З от " З@@ З"  З@~@@@@@@ З  Б@@@@ г. Й



.{
.[h
 Р┌───┬──────────────┬─────────────────────────────────┬─────────┬──────────────┬──────────────┬──────┬──────────────┬──────┬──────────────┬──────┬────────────┬──────┬──────────────┐ Р
 Р│ N │Номенклатурный│       Наименование товара       │ Единица │    Объем     │Свободная цена│ Опт. │Свободная цена│ Розн.│Розничная цена│ставка│   сумма    │Налог │Продажная цена│ Р
 Р│п/п│ номер товара │                                 │измерения│    партии    │  поставщика  │надбав│ поступления  │надбав│              │НДС, %│    НДС     │с прод│              │ Р
 Р├───┴──────────────┼─────────────────────────────────┼─────────┼──────────────┼──────────────┼──────┼──────────────┼──────┼──────────────┼──────┼────────────┼──────┼──────────────┤ Р
.]h
.begin
  NomPp :=NomPp + 1
end.
 Р│&&&│&&&&&&&&&&&&&&│@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&#'&&&&&&&&&&&│&#'&&&&&&&&&&&│&#&.&&│&#'&&&&&&&&&&&│&#&.&&│&#'&&&&&&&&&&&│&#&.&&│&#'&&&&&&&&&│&#&.&&│&#'&&&&&&&&&&&│ Р
.[f
 Р└───┴──────────────┴─────────────────────────────────┴─────────┴──────────────┴──────────────┴──────┴──────────────┴──────┴──────────────┴──────┴────────────┴──────┴──────────────┘ Р
.]f
.}
 Итого позиций:  Б^ (^) Б
.endform