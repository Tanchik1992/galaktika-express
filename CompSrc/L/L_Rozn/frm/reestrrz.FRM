! ╔═════════════════════════════════════════════════════════════════════════╗
! ║  Разработал:  Голец Дмитрий Иванович                                    ║
! ║  Назначение:  Реестр Свободных розничных цен                            ║
! ╚═════════════════════════════════════════════════════════════════════════╝
!
#doc
Реестр Свободных розничных цен
#end
.set name='ReestrRZ'
.hide
.var
  God        :String[4];
  CenaNoNDS  :Double;  //цена единицы с НДС
  SumWithNDS :Double;  //сумма с НДС
.endvar
.begin
  God :=DateToStr(Cur_Date, 'YYYY');
end.
.fields
  дата_инвентаризации :Date
  номер_инвентаризации

  Организация
  Организация_УНН
  Организация_ОКПО
  Организация_ОКОНХ
  Организация_Банк

  Руководитель_ФИО
  Руководитель_таб_N
  Руководитель_должность

  Гл_бух_ФИО
  Гл_бух_таб_N
  Гл_бух_должность

  Грузоотправитель
  Грузоотправитель_УНН
  Грузоотправитель_ОКПО
  Грузоотправитель_Банк

  Поставщик
  Поставщик_УНН
  Поставщик_ОКПО
  Поставщик_Банк

  Тип_подразделения :Boolean
  Подразделение_получатель

  МОЛ_получатель_ФИО
  МОЛ_получатель_таб_N
  МОЛ_получатель_должность

  KatSopr_nRec :Comp

  Номер_накладной
  Дата_накладной :Date
  Дата_оприходования :Date

  Наименование_договора
  Номер_договора
  Дата_договора : Date

  Номер_счет_фактуры
  Дата_счет_фактуры : Date

  Дата_окончания_погрузки : Date
  Пункт_погрузки

  Пункт_разгрузки
  Автомобиль
  Номер_автомобиля

  Дата_начала_разгрузки     : Date
  Время_начала_разгрузки    : Time
  Дата_окончания_разгрузки  : Date
  Время_окончания_разгрузки : Time

  Код_группы_МЦ_тара

!.{
   SpSoprnRec1 :Comp

   Код_группы_МЦ1
   Название_МЦ1
   Код_МЦ1
   ед_измерения1

   Количество_всего_учетное1     : Double
   Количество_всего_фактическое1 : Double
   Количество_в_одном_месте1     : Double
   Учетное_количество_мест1      : Double
   Фактическое_количество_мест1  : Double

   Вес_брутто1 : Double
   Вес_нетто1  : Double

   Цена_единицы1 : Double

   Ставка_налога_НДС1 : Double
   cумма_вход_НДС1    : Double
   cумма_исход_НДС1   : Double

   Сертификат_качества1

!-------------------- для реестра -------------------
   цена_первая        : Double
   оптовая_надбавка   : Double
   цена_учетная       : Double
   розничная_надбавка : Double
   цена_розничная     : Double
   налог_с_продажи    : Double
   цена_продажная     : Double
!.}

!.{
   SpSoprnRec2 :Comp

   Код_группы_МЦ2
   Название_МЦ2
   Код_МЦ2
   ед_измерения2

   Количество_всего_учетное2     : Double
   Количество_всего_фактическое2 : Double
   Количество_в_одном_месте2     : Double
   Учетное_количество_мест2      : Double
   Фактическое_количество_мест2  : Double

   Вес_брутто2 : Double
   Вес_нетто2  : Double

   Цена_единицы2 : Double

   Ставка_налога_НДС2 : Double
   cумма_вход_НДС2    : Double
   cумма_исход_НДС2   : Double

   Сертификат_качества2
!.}

!.{
   SpSoprnRec3 :Comp

   Код_группы_МЦ3
   Название_МЦ3
   Код_МЦ3
   ед_измерения3

   Количество_всего_учетное3     : Double
   Количество_всего_фактическое3 : Double
   Количество_в_одном_месте3     : Double
   Учетное_количество_мест3      : Double
   Фактическое_количество_мест3  : Double

   Вес_брутто3 : Double
   Вес_нетто3  : Double

   Цена_единицы3 : Double

   Ставка_налога_НДС3 : Double
   cумма_вход_НДС3    : Double
   cумма_исход_НДС3   : Double

   Сертификат_качества3
!.}

!.{
   SpSoprnRec4 :Comp

   Код_группы_МЦ4
   Название_МЦ4
   Код_МЦ4
   ед_измерения4

   Количество_всего_учетное4     : Double
   Количество_всего_фактическое4 : Double
   Количество_в_одном_месте4     : Double
   Учетное_количество_мест4      : Double
   Фактическое_количество_мест4  : Double

   Вес_брутто4 : Double
   Вес_нетто4  : Double

   Цена_единицы4 : Double

   Ставка_налога_НДС4 : Double
   cумма_вход_НДС4    : Double
   cумма_исход_НДС4   : Double

   Сертификат_качества4
!.}
.endfields
-------------------------------------------------------------------------------
.{
дата_инвентаризации         ^
номер_инвентаризации        ^

Организация                 ^
Организация_УНН             ^
Организация_ОКПО            ^
Организация_ОКОНХ           ^
Организация_Банк            ^

Руководитель_таб_N          ^
Руководитель_ФИО            ^
Руководитель_должность      ^

Гл_бух_таб_N                ^
Гл_бух_ФИО                  ^
Гл_бух_должность            ^

Грузоотправитель            ^
Грузоотправитель_УНН        ^
Грузоотправитель_ОКПО       ^
Грузоотправитель_Банк       ^

Поставщик                   ^
Поставщик_УНН               ^
Поставщик_ОКПО              ^
Поставщик_Банк              ^

Тип_подразделения           ^
Подразделение_получатель    ^

МОЛ_получатель_таб_N        ^
МОЛ_получатель_ФИО          ^
МОЛ_получатель_должность    ^

KatSopr_nRec                ^

Номер_накладной             ^
Дата_накладной              ^
Дата_оприходования          ^

Наименование_договора       ^
Номер_договора              ^
Дата_договора               ^

Номер_счет_фактуры          ^
Дата_счет_фактуры           ^

Дата_окончания_погрузки     ^
Пункт_погрузки              ^

Пункт_разгрузки             ^
Автомобиль                  ^
Номер_автомобиля            ^

Дата_начала_разгрузки       ^
Время_начала_разгрузки      ^
Дата_окончания_разгрузки    ^
Время_окончания_разгрузки   ^

Код_группы_МЦ_тара          ^

_____________________________________________________________________________
.{
------------------------------------------------------
SpSoprnRec1                   ^

Код_группы_МЦ1                ^
Название_МЦ1                  ^
Код_МЦ1                       ^
Eд_измерения1                 ^

Количество_всего_учетное1     ^
Количество_всего_фактическое1 ^
Количество_в_одном_месте1     ^
Учетное_количество_мест1      ^
Фактическое_количество_мест1  ^

Вес_брутто1                   ^
Вес_нетто1                    ^

Цена_единицы1                 ^

Ставка_налога_НДС1            ^
cумма_вход_НДС1               ^
cумма_исход_НДС1              ^

Сертификат_качества1          ^

!-------------------- для реестра -------------------
цена_первая                       ^
оптовая_надбавка                  ^
цена_учетная                      ^
розничная_надбавка                ^
цена_розничная                    ^
налог_с_продажи                   ^
цена_продажная                    ^

.begin
  CenaNoNDS  :=Цена_единицы1 - if(Тип_подразделения, cумма_вход_НДС1 /
                                  Количество_всего_фактическое1, 0);
  SumWithNDS :=CenaNoNDS * Количество_всего_фактическое1 + cумма_вход_НДС1;
end.
.}

_____________________________________________________________________________
.{
------------------------------------------------------
SpSoprnRec2                   ^

Код_группы_МЦ2                ^
Название_МЦ2                  ^
Код_МЦ2                       ^
Eд_измерения2                 ^

Количество_всего_учетное2     ^
Количество_всего_фактическое2 ^
Количество_в_одном_месте2     ^
Учетное_количество_мест2      ^
Фактическое_количество_мест2  ^

Вес_брутто2                   ^
Вес_нетто2                    ^

Цена_единицы2                 ^

Ставка_налога_НДС2            ^
cумма_вход_НДС2               ^
cумма_исход_НДС2              ^

Сертификат_качества2          ^

.begin
  CenaNoNDS  :=Цена_единицы2 - if(Тип_подразделения, cумма_вход_НДС2 /
                                  Количество_всего_фактическое2, 0);
  SumWithNDS :=CenaNoNDS * Количество_всего_фактическое2 + cумма_вход_НДС2;
end.
.}

_____________________________________________________________________________
.{
------------------------------------------------------
SpSoprnRec3                   ^

Код_группы_МЦ3                ^
Название_МЦ3                  ^
Код_МЦ3                       ^
Eд_измерения3                 ^

Количество_всего_учетное3     ^
Количество_всего_фактическое3 ^
Количество_в_одном_месте3     ^
Учетное_количество_мест3      ^
Фактическое_количество_мест3  ^

Вес_брутто3                   ^
Вес_нетто3                    ^

Цена_единицы3                 ^

Ставка_налога_НДС3            ^
cумма_вход_НДС3               ^
cумма_исход_НДС3              ^

Сертификат_качества3          ^

.begin
  CenaNoNDS  :=Цена_единицы3 - if(Тип_подразделения, cумма_вход_НДС3 /
                                  Количество_всего_фактическое3, 0);
  SumWithNDS :=CenaNoNDS * Количество_всего_фактическое3 + cумма_вход_НДС3;
end.
.}

_____________________________________________________________________________
.{
------------------------------------------------------
SpSoprnRec4                   ^

Код_группы_МЦ4                ^
Название_МЦ4                  ^
Код_МЦ4                       ^
Eд_измерения4                 ^

Количество_всего_учетное4     ^
Количество_всего_фактическое4 ^
Количество_в_одном_месте4     ^
Учетное_количество_мест4      ^
Фактическое_количество_мест4  ^

Вес_брутто4                   ^
Вес_нетто4                    ^

Цена_единицы4                 ^

Ставка_налога_НДС4            ^
cумма_вход_НДС4               ^
cумма_исход_НДС4              ^

Сертификат_качества4          ^

.begin
  CenaNoNDS  :=Цена_единицы4 - if(Тип_подразделения, cумма_вход_НДС4 /
                                  Количество_всего_фактическое4, 0);
  SumWithNDS :=CenaNoNDS * Количество_всего_фактическое4 + cумма_вход_НДС4;
end.
.}
.}
.endform



!******************************************************************************
!******************************************************************************
!******************************************************************************
#doc
Реестр свободных розничных цен
#end
.LinkForm 'ReestrRZ_1' prototype is 'ReestrRZ'
.NameInList '1. Реестр свободных розничных цен'
.DEFO LANDSCAPE
.p 55
!.O1 8
.var
   NomPp : double
.endvar
.fields
  CommonFormHeader

  Организация

  DateToStr(дата_инвентаризации, 'DD mon YYYY г. (day)')

  DateToStr(дата_инвентаризации, 'DD mon YYYY г. (day)')
  Номер_накладной
  DateToStr(Дата_накладной, 'DD/MM/YYYY г.')

  Поставщик

  Номер_договора
  if(Дата_договора<>date(0,0,0), DateToStr(Дата_договора, 'DD/MM/YYYY г.'), '___________ г.')
!.{
   NomPp
   Код_МЦ1
   Название_МЦ1
   ед_измерения1

   Количество_всего_фактическое1

   цена_первая
   оптовая_надбавка
   цена_учетная
   розничная_надбавка
   цена_розничная
   if(Abs(налог_с_продажи) < 0.5, 0.0, налог_с_продажи)
   цена_продажная
!.}
  NomPp
  DoubleToStr(NomPp,'4\F')
.endfields
.p 43
.begin
  NomPp := 0
end.
.{
^
 И                                                                                        Приложение № 2 И
 И                                             к Методическим рекомендациям по формированию и применению И
 И                                             свободных цен и тарифов на продукцию, товары и услуги И
 Й                                              Ж@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ П
                                       Р(наименование предприятия (продавца), регистрирующего свободные розничные цены) Р
 И                                                              от  Б^ Б № ____ И

 Б                                          РЕЕСТР Б
 И                               свободных цен (розничных) на  Б^ Й
 И                               полученных по накладной №   Б^ Б от  Б^ Й
 И                               поставщик Р @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Ш
 И                               договор №   Б^ Б от  Б^ Й


! Подразделение розничной торговли: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
! Материально-ответственное лицо  : @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

.{
.[h OverWrite
 Р───┬────────────────┬────────────────────────────┬───────┬────────────────┬────────────────┬──────┬────────────────┬──────┬────────────────┬──────┬──────────────── Р
 Р № │ Номенклатурный │  Наименование товара       │Единица│    Объем       │ Свободная цена │Опт   │Свободная цена  │Розн  │Розничная цена  │Налог │Продажная цена   Р
 Рп/п│  номер товара  │                            │измер. │    партии      │ поставщика     │надбав│поступления     │надбав│                │с прод│                 Р
 Р───┴────────────────┴────────────────────────────┴───────┴────────────────┴────────────────┴──────┴────────────────┴──────┴────────────────┴──────┴──────────────── Р
.]h
.begin
   NomPp :=NomPp + 1
end.
 Р&&& &&&&&&&&&&&&&&&& @@@@@@@@@@@@@@@@@@@@@@@@@@@@ @~@@@@@ &'#&&&&&&&&&.&&& &'#&&&&&&&&&&.&& &#&.&& &'#&&&&&&&&&&.&& &#&.&& &'#&&&&&&&&&&.&& &#&.&& &'#&&&&&&&&&&.&& Р
.}
 Р .................................................................................................................................................................. Р
 Итого позиций: ^ (^)
.{
.}
.{
.}
.{
.}

.}
.endform



!******************************************************************************
!******************************************************************************
!******************************************************************************
#doc
Реестр свободных розничных цен (с НДС)
#end
.LinkForm 'ReestrRZ_2' prototype is 'ReestrRZ'
.NameInList '2. Реестр свободных розничных цен (с НДС)'
.DEFO LANDSCAPE
.p 55
!.O1 8
.var
   NomPp : double
.endvar
.fields
  CommonFormHeader

  Организация

  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'DD'), '')
  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'mon'), '')
  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'YYYY г.(day)'), God+' г.')

  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'DD'), '')
  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'mon'), '')
  if(LongInt(дата_инвентаризации) <> LongInt(0),
     DateToStr(дата_инвентаризации, 'YYYY г.(day)'), God+' г.')

  Номер_накладной
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'DD'), '')
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'mon'), '')
  if(LongInt(Дата_накладной) <> LongInt(0),
     DateToStr(Дата_накладной, 'YYYY'), God)

  Поставщик

  if(Номер_договора <> '', Номер_договора, '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'DD'), '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'mon'), '')
  if(LongInt(Дата_договора) <> LongInt(0),
     DateToStr(Дата_договора, 'YYYY'), God)
!.{
   NomPp
   Код_МЦ1
   Название_МЦ1
   ед_измерения1

   Количество_всего_фактическое1

   цена_первая
   оптовая_надбавка
   цена_учетная

   Ставка_налога_НДС1
   cумма_вход_НДС1 / Количество_всего_фактическое1

   розничная_надбавка
   цена_розничная
   if(Abs(налог_с_продажи) < 0.5, 0.0, налог_с_продажи)
   cумма_исход_НДС1 / Количество_всего_фактическое1
   цена_продажная
!.}
  NomPp
  DoubleToStr(NomPp,'4\F')
.endfields
.p 43
.begin
  NomPp := 0
end.
.{
^
 И                                                                                       Приложение №  2 И
 И                                             к Методическим рекомендациям по формированию и применению И
 И                                             свободных цен и тарифов на продукцию, товары и услуги И
 Й                                              Ж@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ П
                                       Р(наименование предприятия (продавца), регистрирующего свободные розничные цены) Р
 И                                                  от " З@@ З"  З@~@@@@@@ З  Б^ Б №  Б__________ Й

 Б                                          РЕЕСТР Б
 И                               свободных цен (розничных) на " З@@ З"  З@~@@@@@@ З  Б^ Й
 И                               полученных по накладной №  З@@@@@@@@@@ З от " З@@ З"  З@~@@@@@@ З  Б@@@@ г. Й
 И                               поставщик  Ч@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Я
 И                               договор №  З@@@@@@@@@@ З от " З@@ З"  З@~@@@@@@ З  Б@@@@ г. Й


! Подразделение розничной торговли: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
! Материально-ответственное лицо  : @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

.{
.[h OverWrite
 Ш┌─────┬──────────────┬─────────────────────────────────────────────┬─────────┬────────────┬──────────────┬──────┬──────────────┬──────┬────────────┬──────┬──────────────┬──────┬────────────┬──────────────┐ Ш
 Ш│  №  │Номенклатурный│            Наименование товара              │ Единица │   Объем    │Свободная цена│ Опт. │Свободная цена│ставка│   сумма    │ Розн.│Розничная цена│Налог │   сумма    │Продажная цена│ Ш
 Ш│ п/п │ номер товара │                                             │измерения│   партии   │  поставщика  │надбав│ поступления  │НДС, %│ вход. НДС  │надбав│              │с прод│ исход. НДС │              │ Ш
 Ш├─────┼──────────────┼─────────────────────────────────────────────┼─────────┼────────────┼──────────────┼──────┼──────────────┼──────┼────────────┼──────┼──────────────┼──────┼────────────┼──────────────┤ Ш
.]h
.begin
   NomPp :=NomPp + 1
end.
 Ш│&&&&&│&&&&&&&&&&&&&&│@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@│@~@@@@@@@│&'#&&&&&.&&&│&'#&&&&&&&&.&&│&#&.&&│&'#&&&&&&&&.&&│&#&.&&│&#'&&&&&&.&&│&#&.&&│&'#&&&&&&&&.&&│&#&.&&│&#'&&&&&&.&&│&'#&&&&&&&&.&&│ Ш
.[f
 Ш└─────┴──────────────┴─────────────────────────────────────────────┴─────────┴────────────┴──────────────┴──────┴──────────────┴──────┴────────────┴──────┴──────────────┴──────┴────────────┴──────────────┘ Ш
.]f
.}
 Итого позиций:  Б^ (^) Б
.{
.}
.{
.}
.{
.}

.}
.endform



!******************************************************************************
#Include ReestrRzBel.frn
#Include TorgN_1.frn  //форма №ТОРГ-1 "АКТ о приемке товаров"
#Include TorgN_2.frn  //форма №ТОРГ-2 "АКТ о расхождении при приемке МЦ"
#Include TorgN_3.frn  //форма №ТОРГ-3 "АКТ о расхождении при приемке импортных товаров"
#Include TorgN_4.frn  //форма №ТОРГ-4 "АКТ о приемке товара без счета поставщика"