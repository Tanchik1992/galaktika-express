!╔═══════════════════════════════════════════════════════════════════════════╗
!║                     (c) 1994,97 корпорация ГАЛАКТИКА                      ║
!║ Проект        : ГАЛАКТИКА                                                 ║
!║ Система       : Оперативный контур                                        ║
!║ Версия        : 5.71                                                      ║
!║ Назначение    : Процедура заполняет поля по умолчанию в KatSopr при       ║
!║                создании приходной накладной из ДО (расширенная информация)║
!║ Ответственный : Ясев А.А                                                  ║
!║ Параметры     : нет                                                       ║
!╚═══════════════════════════════════════════════════════════════════════════╝
#ifndef _KATSSETD_VPP
#define _KATSSETD_VPP
procedure katssetd;
{
  if DemoMode
    {
      var pRecChecker : RecChecker;
      if not pRecChecker.CheckKatSoprRecords(typeSopr)
        {
          Abort;
          Exit;
        }
    }

//  Логвин В.  09.08.99  ПИР-2.7603
//  if (not CanEditDocument)
//    {
//      Abort;
//      Exit;
//    }
  if (not CanEditDocument)   ProtectRecord(#KatSopr,true);
////////////////////////////////////
  if (DesGroup <> sGetTune('User.DesGr'))
    {
      if (Message(''#3'При создании нового документа выбранные ограничения '+
         'по менеджеру будут отменены и будут установлены ограничения '+
         'по вашей личной настройке.'#13#13#3'Продолжить ?',YesNo) <> cmYes)
        {
          Abort;
          Exit;
        };
      ResetDocBound;
      DscVisible := wGetTune('Doc.Visible');
      DesGroup := sGetTune('User.DesGr');
      DscName := sGetTune('User.Descr');
      SetDocBound;
    }
  KatSoprDefault;
//  KatSopr.Status := 0;
 Case TypeSopr of
  101,108,111: KatSopr.Status := if (wGetTune('Doc.Buy.SoprStatus') = 0,1,0);
  1411   : KatSopr.Status := if (wGetTune('Doc.Wood.Journ.SoprStatus') = 0,1,0);
  201,211: KatSopr.Status := if (wGetTune('Doc.Sell.SoprStatus') = 0,1,0);
  1421   : KatSopr.Status := if (wGetTune('Doc.Wood.Nakl.SoprStatus') = 0,1,0);
  103,203: KatSopr.Status := if (wGetTune('Doc.PrCons.SoprStatus') = 0,1,0);
  102,202: KatSopr.Status := if (wGetTune('Doc.OtpCons.SoprStatus') = 0,1,0);
  else KatSopr.Status := 0;
 end;

//  KatSopr.cNote  := oNotes.GetFirstNote(100,KatSopr.Status);
 Case TypeSopr of
  202: KatSopr.cNote  := oNotes.GetFirstNote(202,KatSopr.Status);
  ELSE KatSopr.cNote  := oNotes.GetFirstNote(100,KatSopr.Status);
 END;
  PutCommand(cmEditSopr);
}
#end