//******************************************************************************
//                                                      (c) корпорация Галактика
// Галактика 7.12 - Логистика
// Выбор для SpSopr ( ТТН и ж/д )
//******************************************************************************

//***********************************************************
// Пересчет полей НЕТТО-ТАРА-БРУТТО в зависимости от настроек

#include soprttn2.vpp

//************************************************************

cmPick:
  case CurField of
  //--------------
    #ValutAvt:          RunInterface( GetValOt, SpSopr.cValAvt);     // валюта
  //--------------
    #TTNResOtgr.Name:
    {
      if (KatSopr.VidSopr = 1411 OR KatSopr.VidSopr = 1421)
        RunInterface( GetResOtgr_W, SpSopr.cResOtgr, 1)
      else
        RunInterface( GetResOtgr, SpSopr.cResOtgr);  // ресурс отгрузки
    }
  //--------------
    #TTNKatED.Name:     RunInterface( GetEdIzm, SpSopr.cMasEd);      // единица веса
  //--------------
    #TTNMetMassa.Name:  RunInterface( GetMassa, SpSopr.cMasVid);     // способ определения веса
  //--------------
  end; // case CurField

cmDelOnProtect:
  case CurField of
  //--------------
    #ValutAvt:          set SpSopr.cValAvt := 0;
  //--------------
    #TTNResOtgr.Name:   set SpSopr.cResOtgr := 0;
  //--------------
    #TTNKatED.Name:     set SpSopr.cMasEd := 0;
  //--------------
    #TTNMetMassa.Name:  set SpSopr.cMasVid := 0;
  //--------------
    #TTNMoveCell.Name:  set SpSopr.cCellVal := 0;
  //--------------
  end; // case CurField
