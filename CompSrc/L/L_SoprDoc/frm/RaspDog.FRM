/*
 ╔════════════════════════════════════════════════════════════════════════════╗
 ║                     (c) Корпорация ГАЛАКТИКА, 1996,97                      ║
 ║ Проект        : ГАЛАКТИКА                                                  ║
 ║ Система       : Оперативный контур                                         ║
 ║ Версия        : 5.86                                                       ║
 ║ Назначение    : Сформированные накладные                                   ║
 ║ Ответственный :                                                            ║
 ╚════════════════════════════════════════════════════════════════════════════╝
*/
#doc
Сформированные накладные
#end
.set name='RaspDog'
.hide
#include format.frn
.fields
  ДО_нрек
  ДОНомер
  ДОДата
  Контрагент
  Накл_нрек
  НаклНомер
  НаклДата
  Склад

  ДогНомер   ДогДатаВвода   ДогДата1    ДогДата2
  СоглНомер  СоглДатаВвода  СоглДата1   СоглДата2
  ПланНомер  ПланДатаВвода  ПланДата1   ПланДата2

  Спец_нрек
  Спец_номер
  Матценность
  ЕдИзмерения
  КолДО    : double
  КолПлан  : double
  КолОрд   : double
  КолНакл  : double
.endfields

  ДО_нрек       ^
  ДОНомер       ^
  ДОДата        ^
  Контрагент    ^
.{
  Накл_нрек     ^
  НаклНомер     ^
  НаклДата      ^
  Склад         ^

  ДогНомер  ^  ДогДатаВвода  ^  ДогДата1  ^  ДогДата2  ^
  СоглНомер ^  СоглДатаВвода ^  СоглДата1 ^  СоглДата2 ^
  ПланНомер ^  ПланДатаВвода ^  ПланДата1 ^  ПланДата2 ^

.{
  Спец_нрек      ^
  Спец_номер     ^
  Матценность    ^
  ЕдИзмерения    ^
  КолДО          ^
  КолПлан        ^
  КолОрд         ^
  КолНакл        ^
.}
.}
.endform

#doc
Протокол формирования
#end
.linkform 'RaspDog01' prototype is 'RaspDog'
.NameInList 'Протокол формирования'
.DEFP PA4
.DEFO PORTRAIT
.fields
  ' № ' + ДОНомер +' от '+ string(ДОДата)
  Контрагент

  ' № ' + НаклНомер +' от '+ string(НаклДата)
  Склад

  if(ДогНомер<>'' or ДогДатаВвода <> '',
  ' № ' + ДогНомер + ' дата ввода: ' +  string(ДогДатаВвода) + ' период: ' + string(ДогДата1) + ' - ' + string(ДогДата2),
  '')
  if(СоглНомер<>'' or string(СоглДатаВвода) <> '',
  ' № ' + СоглНомер + ' дата ввода: ' +  string(СоглДатаВвода) + ' период: ' + string(СоглДата1) + ' - ' + string(СоглДата2),
  '')
  if(ПланНомер<>'' or string(ПланДатаВвода) <> '',
  ' № ' + ПланНомер + ' дата ввода: ' +  string(ПланДатаВвода) + ' период: ' + string(ПланДата1) + ' - ' + string(ПланДата2),
  '')

    Спец_номер
    Матценность
    ЕдИзмерения
    DoubleToStr(КолДО,Kol_Pr)
    DoubleToStr(КолПлан,Kol_Pr)
    DoubleToStr(КолОрд,Kol_Pr)
    DoubleToStr(КолНакл,Kol_Pr)
.endfields

                           Б СФОРМИРОВАННЫЕ НАКЛАДНЫЕ  Б

 По ДО:  В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
 Контрагент:  В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В

.{
      Накладная:  В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
      Склад:      В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
      Договор:    В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
      Соглашение: В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
      Кал.план:   В@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ В
┌───┬──────────────────────────┬──────────────┬─────────────────────────────────────────────────────────┐
│ № │                          │   Единица    │                       Количество                        │
│п\п│ Наименование матценности │  измерения   ├─────────────┬──────────────┬──────────────┬─────────────┤
│   │                          │              │    по ДО    │   по плану   │   в ордерах  │ в накладной │
├───┼──────────────────────────┼──────────────┼─────────────┼──────────────┼──────────────┼─────────────┤
.{
│@@@│ @@@@@@@@@@@@@@@@@@@@@@@@ │ @@@@@@@@@@@@ │ &&&&&&&&&&& │ &&&&&&&&&&&& │ &&&&&&&&&&&& │ &&&&&&&&&&& │
.}
└───┴──────────────────────────┴──────────────┴─────────────┴──────────────┴──────────────┴─────────────┘


.}
.endform
