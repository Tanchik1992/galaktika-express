!!!!  справка о доходах по совместителям (на магнитных носителях)  !!!!!!!!!!!!!
.linkform 'bfrm2_MAGNIT2' prototype is 'bfrm2T'
.nameinlist'Сведения о доходах физических лиц(на магнитных носителях)'
.F 'BFRM2.OUT'
.group 'электронный файл'
.DEFP PA4
.p 37
.var
   _Dat: date;
   IsHeader : boolean ;
   сумма_льгот_вар   : double;
   Совокупный_доход_вар : double;
   fior : string[100];
   posr : word;
   fam, im, ot : string[30];

.endvar
.begin IsHeader := false; end.
.{ bfrm2T_Cycle CheckEnter
.fields
!!!! шапка !!!!!!!
ИНН_работодателя
код_ГНИ
DateToStr(Дата_отчета_шап,'DD.MM.YYYY')
год_за_который_отчет
месяц_ок
.endfields
.{?internal;not IsHeader
.begin IsHeader := true; end.
0.1:^
0.2:^
0.3:^
0.4:^
0.5:^
.}
.fields
!!!! Анкета !!!!!!!
ИНН_работодателя
название_работодателя
ИНН_налогоплательщика
UpCase(fam)
UpCase(im)
UpCase(ot)
код_документа_удостоверяющего_личность
серия_документа
номер_документа
DateToStr(StrToDate(дата_выдачи_документа, 'DD/MM/YYYY'),'DD.MM.YYYY')
кем_выдан
личный_номер
.endfields
.begin

  fam := '';
  im  := '';
  ot  := '';
  сумма_льгот_вар := 0;
  Совокупный_доход_вар:= 0;
  fior := trim(ФИО_налогоплательщика);
  posr := instr(' ',fior)
  if posr <> 0
  then
  {
     fam  := substr(fior,1,posr);
     fior := trim(substr(fior,posr,Length(fior)));
     posr := instr(' ',fior);
     if posr <> 0
     {
       im   := substr(fior,1,posr);
       ot   := trim(substr(fior,posr,Length(fior)));
     }
     else
       im   := trim(fior);
  }
 end.
1.1:^
1.2:^
2.1:^
2.2.1:^
2.2.2:^
2.2.3:^
2.3:^
2.4.1:^
2.4.2:^
2.5:^
2.5.1:^
.{?internal; trim(код_документа_удостоверяющего_личность) ='01'
2.5.2:^
.}
.fields
!!!! адреса !!!!!!!
Код_страны
Индекс_места_жительства
КодПоСОАТО
UpCase(Область)
UpCase(Район)
Сельсовет
UpCase(Тип_Нас_пункт)
UpCase(Город)
Тип_Улица_м
Улица_м
Дом_м
Корпус_м
Квартира_м
!!!!!!!!!!!!!!!!!!!!
 Статус
 Код_работы
 ГНИ_налогоплательщика
.endfields
2.6.1:^
2.6.2:^
2.6.3:^
2.6.4:^
2.6.5:^
2.6.6:^
2.6.7:^
2.6.8:^
2.6.9:^
2.6.10:^
2.6.11:^
2.6.12:^
2.6.13:^
2.7:^
2.8:^
2.9:^
.fields
 Доход1 Доход7 Доход2  Доход8  Доход3 Доход9
 Доход4 Доход10 Доход5 Доход11 Доход6 Доход12
.endfields
.{?internal; (Double(Доход1) <> 0)
3.1:01;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход1) end.
.}
.{?internal; Double(Доход7) <> 0
3.1:02;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход7) end.
.}
.{?internal; Double(Доход2) <> 0
3.1:03;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход2) end.
.}
.{?internal; Double(Доход8) <> 0
3.1:04;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход8) end.
.}
.{?internal; Double(Доход3) <> 0
3.1:05;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход3) end.
.}
.{?internal; Double(Доход9) <> 0
3.1:06;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход9) end.
.}
.{?internal; Double(Доход4) <> 0
3.1:07;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход4) end.
.}
.{?internal; Double(Доход10) <> 0
3.1:08;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход10) end.
.}
.{?internal; Double(Доход5) <> 0
3.1:09;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход5) end.
.}
.{?internal; Double(Доход11) <> 0
3.1:10;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход11) end.
.}
.{?internal; Double(Доход6) <> 0
3.1:11;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход6) end.
.}
.{?internal; Double(Доход12) <> 0
3.1:12;^
.begin Совокупный_доход_вар := Совокупный_доход_вар + double(Доход12) end.
.}
.fields
Код1 Сумма1 Код2 Сумма2 Код3 Сумма3 Код4  Сумма4  Код5  Сумма5  Код6  Сумма6
Код7 Сумма7 Код8 Сумма8 Код9 Сумма9 Код10 Сумма10 Код11 Сумма11 Код12 Сумма12
.endfields
.{?internal; Double(Сумма1) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма2) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма3) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма4) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма5) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма6) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма7) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма8) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма9) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма10) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма11) <> 0
3.1.1:^;^
.}
.{?internal; Double(Сумма12) <> 0
3.1.1:^;^
.}
.fields
КодЛьг1 МесЛьг1 СуммаЛьг1 СуммаВыч1  КодЛьг2 МесЛьг2 СуммаЛьг2 СуммаВыч2
КодЛьг3 МесЛьг3 СуммаЛьг3 СуммаВыч3  КодЛьг4 МесЛьг4 СуммаЛьг4 СуммаВыч4
КодЛьг5 МесЛьг5 СуммаЛьг5 СуммаВыч5  КодЛьг6 МесЛьг6 СуммаЛьг6 СуммаВыч6
КодЛьг7 МесЛьг7 СуммаЛьг7 СуммаВыч7  КодЛьг8 МесЛьг8 СуммаЛьг8 СуммаВыч8
.endfields
.{?internal; (Double(СуммаЛьг1) <> 0)and(Double(СуммаВыч1) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч1) end.
.}
.{?internal; (Double(СуммаЛьг2) <> 0)and(Double(СуммаВыч2) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч2) end.
.}
.{?internal; (Double(СуммаЛьг3) <> 0)and(Double(СуммаВыч3) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч3) end.
.}
.{?internal; (Double(СуммаЛьг4) <> 0)and(Double(СуммаВыч4) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч4) end.
.}
.{?internal; (Double(СуммаЛьг5) <> 0)and(Double(СуммаВыч5) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч5) end.
.}
.{?internal; (Double(СуммаЛьг6) <> 0)and(Double(СуммаВыч6) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч6) end.
.}
.{?internal; (Double(СуммаЛьг7) <> 0)and(Double(СуммаВыч7) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч7) end.
.}
.{?internal; (Double(СуммаЛьг8) <> 0)and(Double(СуммаВыч8) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч8) end.
.}
.{ bfrm2T_Cycle1 CheckEnter
.fields
КодЛьг9 МесЛьг9 СуммаЛьг9 СуммаВыч9  КодЛьг10 МесЛьг10 СуммаЛьг10 СуммаВыч10
КодЛьг11 МесЛьг11 СуммаЛьг11 СуммаВыч11  КодЛьг12 МесЛьг12 СуммаЛьг12 СуммаВыч12
.endfields
.{?internal; (Double(СуммаЛьг9) <> 0)and(Double(СуммаВыч9) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч9) end.
.}
.{?internal; (Double(СуммаЛьг10) <> 0)and(Double(СуммаВыч10) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч10) end.
.}
.{?internal; (Double(СуммаЛьг11) <> 0)and(Double(СуммаВыч11) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч11) end.
.}
.{?internal; (Double(СуммаЛьг12) <> 0)and(Double(СуммаВыч12) <> 0)
4.1:^;^;^;^
.begin сумма_льгот_вар := сумма_льгот_вар + double(СуммаВыч12) end.
.}
.}
.fields
 КодВычета1  СуммаВычета1  КодВычета2  СуммаВычета2
 КодВычета3  СуммаВычета3  КодВычета4  СуммаВычета4
 КодВычета5  СуммаВычета5  КодВычета6  СуммаВычета6
.endfields
.{?internal; (Double(СуммаВычета1) <> 0)
4.2:^;^
.}
.{?internal; (Double(СуммаВычета2) <> 0)
4.2:^;^
.}
.{?internal; (Double(СуммаВычета3) <> 0)
4.2:^;^
.}
.{?internal; (Double(СуммаВычета4) <> 0)
4.2:^;^
.}
.{?internal; (Double(СуммаВычета5) <> 0)
4.2:^;^
.}
.{?internal; (Double(СуммаВычета6) <> 0)
4.2:^;^
.}
.fields
 Общая_сумма_льгот
 Общая_сумма_вычетов
 Совокупный_доход
 Облагаемый_доход
 Начислено_налога
 Удержано_налога
 Перечислено_налога_в_бюджет
.endfields
.{?internal; Double(Общая_сумма_льгот) <> 0
4.3:^
.}
.{?internal; Double(Общая_сумма_вычетов) <> 0
4.4:^
.}
5.1:^
5.2:^
.{?internal; Double(Начислено_налога) <> 0
5.3:^
.}
.{?internal; Double(Удержано_налога) <> 0
5.4:^
.}
.{?internal; Double(Перечислено_налога_в_бюджет) <> 0
5.5:^
.}
!6.0:
.}
.endform