//------------------------------------------------------------------------------
//                                                      (c) корпорация Галактика
// Галактика 5.85 - Бухгалтерский контур
// Упрощенная система налогообложения (УСН): Доходы и расходы
//------------------------------------------------------------------------------

#doc
Упрощенная система налогообложения (УСН): Доходы и расходы
#end
.set name='ReePlp1'
.hide
.fields
  dates   :date// с ____ по _____

  LevelName:string:'t:r'  // наименование группировки (номер документа,наименование платежа)
  LevelSumD    // сумма  на уровне
  LevelSumDNal //
  LevelSumR    //
  LevelSumRNal //

  //Perf_Number  // номер в отчете по порядку
  Perf_nRec    // PlPor.nRec, Oborot.nRec
  Perf_NoDoc   // обороты и проводки по ним
  Perf_Date :date // дата
  Perf_Name:string:'t:r' // назначение платежа
  Perf_SumD    // доходы
  Perf_SumDNal // доходы, которые входят в расчет единого налога
  Perf_SumR    // расходы
  Perf_SumRNal // расходы, которые входят в расчет единого налога

.endfields
! Подкачка Excel форматов
! Эта строчка нужна пока не будет решена 102.31867
!include ExcelFormat.frn
 
 ^
 
.{
.{ TreePlp1_Body CheckEnter
.if TreePlp1_NeedLine1
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
.end
 ^  ^ ^  ^ ^
.if TreePlp1_NeedLine2
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
.end
.}
.{ TreePlp1_Perfomance CheckEnter
 ^ ^ ^ ^  ^ ^  ^ ^
.}
.{ TreePlp1_Line CheckEnter
   ────────────────────
.}
.}

.endform

//*******************************************************************
.linkform 'ReePlp101' prototype is 'ReePlp1'
.nameinlist 'Доходы и расходы'
.p 60
.defo landscape
.var
 Perf_Cnt: longint
.endvar
.fields
CommonFormHeader
 if ( Longint(dates) = 0, '', DateToStr(dates, 'DD/MM/YYYY'))

 LevelName:'t:r'
 LevelSumD
 LevelSumDNal
 LevelSumR
 LevelSumRNal

 Perf_Cnt
 if ( Longint(Perf_Date) = 0, '', DateToStr(Perf_Date, 'DD/MM/YYYY'))
 Perf_NoDoc
 Perf_Name
 Perf_SumD
 Perf_SumDNal
 Perf_SumR
 Perf_SumRNal

.endfields
^

 Р                                                                            ДОХОДЫ И РАСХОДЫ                      
                                                                     @~@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
.begin
 Perf_Cnt := 0
end.
.{
.[h
                                                                                                                                                              лист  @np@
───────────────────────────────────────────────────────────────────────────────┬───────────────────────────────────────────────────────────────────────────────────────────
                              Регистрация                                      │                                           Сумма
──────┬────────────────────┬───────────────────────────────────────────────────┼──────────────────────┬──────────────────────┬──────────────────────┬──────────────────────
  N   │    Дата и номер    │                Содержание операции                │    Доходы - всего    │ в т.ч.доходы, учиты- │   Расходы - всего    │ в т.ч.расходы, учиты-
 п/п  │первичного документа│                                                   │                      │ ваемые при расчете   │                      │ ваемые при расчете  
      │                    │                                                   │                      │ единого налога       │                      │ единого налога      
──────┴────────────────────┴───────────────────────────────────────────────────┴──────────────────────┴──────────────────────┴──────────────────────┴──────────────────────
.]h
.{ TreePlp1_Body CheckEnter                                                                                                                                                 
.if TreePlp1_NeedLine1
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
.end
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&& 
.if TreePlp1_NeedLine2
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
.end
.}                                                                                                                                                                         
.{ TreePlp1_Perfomance CheckEnter                                                                                                                                           
.begin                                                                                                                                                                     
 Perf_Cnt := Perf_Cnt + 1                                                                                                                                                  
end.                                                                                                                                                                       
&&&&&&  @@@@@@@@@@,@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&&  &'&&&&&&&&&&&&&&&&&&& 
.}                                                                                                                                                                         
.{ TreePlp1_Line CheckEnter
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
.}
.} Р                                                                                                                                                                       
.endform                                                                                                                                                                   
                                                                                                                                                    
                                                                                                                                                    