//------------------------------------------------------------------------------
//                                                      (c) Корпорация ГАЛАКТИКА
// Галактика 8.1 - Бухгалтерский контур
// История изменений архивных данных базовая форма
//------------------------------------------------------------------------------
#doc
  Форма для печати истории изменений архивных данных базовая форма
#end
.form ChHist_base
.NameInList 'История изменений архивных данных базовая форма'
.Hide
.fields
title
daterange
cardinnum
cardname
paramname
adate
oldval
newval
.endfields

 Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~ Б
.case
.when ChHistFilterByDate
 Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~ Б
.when ChHistFilterByDateOff
.end

.{ ChHistCardCycle CheckEnter     // цикл по карточкам
По карточке:  @@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
.case
.when ChHistCardHasChanges
.{ ChHistParamCycle CheckEnter    // цикл по параметрам
По параметру: @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
.{ ChHistValuesCycle CheckEnter   // цикл по значениям
@@@@@@@│@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@│@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
.}
.}
.when ChHistCardHasNoChanges
Нет изменений
.end
.}

.endform

//------------------------------------------------------------------------------
.linkform ChHist prototype is ChHist_base
.NameInList 'История изменений архивных данных'
.P 60
.fields
title
daterange
cardinnum
cardname
paramname
adate
oldval
newval
.endfields
.[H skip
                                                                    лист @np@
───────┬──────────────────────────────────┬──────────────────────────────────
Период │       Предыдущее значение        │          Новое значение
───────┼──────────────────────────────────┼──────────────────────────────────
.]H

 Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~ Б
.case
.when ChHistFilterByDate
 Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@~ Б
.when ChHistFilterByDateOff
.end

───────┬──────────────────────────────────┬──────────────────────────────────
Период │       Предыдущее значение        │          Новое значение
───────┴──────────────────────────────────┴──────────────────────────────────
.{ ChHistCardCycle CheckEnter     // цикл по карточкам
 БПо карточке:  ^ ^ Б
.case
.when ChHistCardHasChanges
.{ ChHistParamCycle CheckEnter    // цикл по параметрам
 БПо параметру: ^ Б
.{ ChHistValuesCycle CheckEnter   // цикл по значениям
@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
.}
.}
.when ChHistCardHasNoChanges
Нет изменений
.end
─────────────────────────────────────────────────────────────────────────────
.}

.endform
