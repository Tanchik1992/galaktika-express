//******************************************************************************
//                                                      (c) корпорация Галактика
// Галактика 7.12 - Логистика - ДО
// Инициализация документов-оснований
//******************************************************************************

{
  myField1 := 'Операция';
  if ( not boGetTune('TProv.PrvzTXO') )
    {
#ifdef __HozOperViewName__
      ClearFieldState(#HozOperViewName, sfVisible);
#end
      ClearFieldState(#MyField1, sfVisible);
    }
  
  if DemoMode
    {
      var pRecChecker: RecChecker;
      if not pRecChecker.CheckBaseDocRecords(tipDO)
        {
          Abort;
          Exit;
        }
    }

  #ifNdef ATL51
  if not IsObjInt
    #CheckOperLicense
  #end

  #include ofpmacro.vpp

  NalType := 1000 + tipDo;

  IsFilter := FALSE;

  KillPick2;

  s_SimvRub := sGetTune('NDE.SimvRub');
  CurDescr  := sGetTune('User.Descr');
  CurDesGr  := sGetTune('User.DesGr');
  CurVisib  := wGetTune('Doc.Visible');

  SetDescrBounds;

  if (BaseNrec = -1)
    PutCommand(cmInsert)
  else
    if (GetFirst BaseDoc where ((BaseNrec == BaseDoc.Nrec)) <> tsOk)
      {
        if (GetLast BaseDoc <> tsOk) 
          { }
      }
    else
      {
        ProcessCommand(cmIdle);
        PutCommand(cmDefault);
      }

  RereadRecord;

  ProcTxt := 'Процент к курсу на день платежа';

  StrCurse := 'Курс на '+string(BaseDoc.dValCurse) + ' за 1 ' + SimVolB;
}