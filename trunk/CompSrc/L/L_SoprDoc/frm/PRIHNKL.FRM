!╔═════════════════════════════════════════════════════════════════════╗
!║      Проект ГАЛАКТИКА (c) 1994,95 TOP SOFT Ltd., АО НОВЫЙ АТЛАНТ    ║
!║  Версия :     3.30                                                  ║
!║  Разработал:  Журавлев Э.И.                                         ║
!║  Назначение: ПРИХОДНАЯ НАКЛАДНАЯ                                    ║
!║  Изменения:                                                         ║
!╚═════════════════════════════════════════════════════════════════════╝

#include predefs.inc

#doc
ПРИХОДНАЯ НАКЛАДНАЯ
#end
.set name = 'prihnkl'
.hide
.fields
 накладная_нрек:comp
  Количество_МЦ :integer
  Количество_Услуг:integer
  Получатель                     // KatOrg.Name
  ПолучательКод                  // KatOrg.TipOrg
  Получатель_Адрес               // KatOrg.Addr
  Получатель_ОКПО                // KatOrg.OKPO
  Получатель_ОКОНХ               // KatOrg.OKONH
  Получатель_ТЕЛ                 // KatOrg.TEL
  Получатель_КонтИнф             // KatOrg.CONTAKTS      Контактная информация
  Получатель_Email               // KatOrg.EMAIL         Электронный почтовый адрес
  Получатель_OKATO               // PodrInfo.OKATO       Код по общероссийскому классификатору административно-территориального деления
  Получатель_KBK                 // PodrInfo.KBK         Код бюджетной классификации
  Получатель_OGRN                // PodrInfo.OGRN        Основной государственный регистрационный номер
  Получатель_РегНом_в_ПФ         // PodrInfo.REGNOMPFR   Регистрационный номер в ПФ
  Получатель_РегНом_Страхователя // PodrInfo.POlE3S      Регистрационный номер страхователя
  Получатель_Орган_Исполн_Власти // PodrInfo.INSNAME     Орган исполнительной власти
  Получатель_Форма_Собственности // FormSobs.Name        Форма собственности
  Получатель_Вид_Деятельности    // FormSobs.VidD        Вид деятельности 
  Получатель_СТАРАНА_КОД         // KatState.KOD
  Получатель_СТРАНА_ИМЯ          // KatState.Name
  Получатель_СТРАНА_НАЛОГИ       // KatState.IsNal
  Получатель_ГОРОД_КОД           // KatCity.KOD
  Получатель_ГОРОД_ИМЯ           // KatCity.Name
  Получатель_ГОРОД_ТЕЛ           // KatCity.TEL
  Получатель_ГОРОД_СТРАНА_КОД    // KatState.KOD
  Получатель_ГОРОД_СТРАНА_ИМЯ    // KatState.Name
  Получатель_ГОРОД_СТРАНА_НАЛОГИ // KatState.IsNal
  Получатель_КОРПОРАЦИЯ          // KatOrg.CorpoIn
  ПолучательУНН                  // KatOrg.UNN   
  ПолучательКПП                  // KatOrg.KODPLATNDS       =  28 ПОЛЕЙ
      Получатель_БАНК_Имя
      Получатель_БАНК_Коментарий
      Получатель_БАНК_Адрес
      Получатель_БАНК_Мфо
      Получатель_БАНК_Ркц
      Получатель_БАНК_Счет
      Получатель_БАНК_Счет_Ркц
      Получатель_БАНК_Счет_Плат
      Получатель_БАНК_Тип_Счета
      Получатель_БАНК_Вид_Счета   // 10 полей
  Поставщик                       // KatOrg.Name
  ПоставщикКод                    // KatOrg.TipOrg
  Поставщик_Адрес                 // KatOrg.Addr
  Поставщик_ОКПО                  // KatOrg.OKPO
  Поставщик_ОКОНХ                 // KatOrg.OKONH
  Поставщик_ТЕЛ                   // KatOrg.TEL
  Поставщик_КонтИнф               // KatOrg.CONTAKTS      Контактная информация
  Поставщик_Email                 // KatOrg.EMAIL         Электронный почтовый адрес
  Поставщик_OKATO                 // PodrInfo.OKATO       Код по общероссийскому классификатору административно-территориального деления
  Поставщик_KBK                   // PodrInfo.KBK         Код бюджетной классификации
  Поставщик_OGRN                  // PodrInfo.OGRN        Основной государственный регистрационный номер
  Поставщик_РегНом_в_ПФ           // PodrInfo.REGNOMPFR   Регистрационный номер в ПФ
  Поставщик_РегНом_Страхователя   // PodrInfo.POlE3S      Регистрационный номер страхователя
  Поставщик_Орган_Исполн_Власти   // PodrInfo.INSNAME     Орган исполнительной власти
  Поставщик_Форма_Собственности   // FormSobs.Name        Форма собственности
  Поставщик_Вид_Деятельности      // FormSobs.VidD        Вид деятельности
  Поставщик_СТАРАНА_КОД           // KatState.KOD
  Поставщик_СТРАНА_ИМЯ            // KatState.Name
  Поставщик_СТРАНА_НАЛОГИ         // KatState.IsNal
  Поставщик_ГОРОД_КОД             // KatCity.KOD
  Поставщик_ГОРОД_ИМЯ             // KatCity.Name
  Поставщик_ГОРОД_ТЕЛ             // KatCity.TEL
  Поставщик_ГОРОД_СТРАНА_КОД      // KatState.KOD
  Поставщик_ГОРОД_СТРАНА_ИМЯ      // KatState.Name
  Поставщик_ГОРОД_СТРАНА_НАЛОГИ   // KatState.IsNal
  Поставщик_КОРПОРАЦИЯ            // KatOrg.CorpoIn
  ПоставщикУНН                    // KatOrg.UNN
  ПоставщикКПП                    // KatOrg.KODPLATNDS       =  28 ПОЛЕЙ
      Поставщик_БАНК_Имя
      Поставщик_БАНК_Коментарий
      Поставщик_БАНК_Адрес
      Поставщик_БАНК_Мфо
      Поставщик_БАНК_Ркц
      Поставщик_БАНК_Счет
      Поставщик_БАНК_Счет_Ркц
      Поставщик_БАНК_Счет_Плат  // счет для платежных документов
      Поставщик_БАНК_Тип_Счета  // 0 расчетный, 1-текущий
      Поставщик_БАНК_Вид_Счета  // 1-активн 0-неакт        = 10 полей
  Грузоотправитель                     // KatOrg.Name
  ГрузоотправительКод                  // KatOrg.TipOrg
  Грузоотправитель_Адрес               // KatOrg.Addr
  Грузоотправитель_ОКПО                // KatOrg.OKPO
  Грузоотправитель_ОКОНХ               // KatOrg.OKONH
  Грузоотправитель_ТЕЛ                 // KatOrg.TEL
  Грузоотправитель_КонтИнф             // KatOrg.CONTAKTS      Контактная информация
  Грузоотправитель_Email               // KatOrg.EMAIL         Электронный почтовый адрес
  Грузоотправитель_OKATO               // PodrInfo.OKATO       Код по общероссийскому классификатору административно-территориального деления
  Грузоотправитель_KBK                 // PodrInfo.KBK         Код бюджетной классификации
  Грузоотправитель_OGRN                // PodrInfo.OGRN        Основной государственный регистрационный номер
  Грузоотправитель_РегНом_в_ПФ         // PodrInfo.REGNOMPFR   Регистрационный номер в ПФ
  Грузоотправитель_РегНом_Страхователя // PodrInfo.POlE3S      Регистрационный номер страхователя
  Грузоотправитель_Орган_Исполн_Власти // PodrInfo.INSNAME     Орган исполнительной власти
  Грузоотправитель_Форма_Собственности // FormSobs.Name        Форма собственности
  Грузоотправитель_Вид_Деятельности    // FormSobs.VidD        Вид деятельности 
  Грузоотправитель_СТАРАНА_КОД         // KatState.KOD
  Грузоотправитель_СТРАНА_ИМЯ          // KatState.Name
  Грузоотправитель_СТРАНА_НАЛОГИ       // KatState.IsNal
  Грузоотправитель_ГОРОД_КОД           // KatCity.KOD
  Грузоотправитель_ГОРОД_ИМЯ           // KatCity.Name
  Грузоотправитель_ГОРОД_ТЕЛ           // KatCity.TEL
  Грузоотправитель_ГОРОД_СТРАНА_КОД    // KatState.KOD
  Грузоотправитель_ГОРОД_СТРАНА_ИМЯ    // KatState.Name
  Грузоотправитель_ГОРОД_СТРАНА_НАЛОГИ // KatState.IsNal
  Грузоотправитель_КОРПОРАЦИЯ          // KatOrg.CorpoIn
  ГрузоотправительУНН                  // KatOrg.UNN    
  ГрузоотправительКПП                  // KatOrg.KODPLATNDS       =  28 ПОЛЕЙ
      Грузоотправитель_БАНК_Имя
      Грузоотправитель_БАНК_Коментарий
      Грузоотправитель_БАНК_Адрес
      Грузоотправитель_БАНК_Мфо
      Грузоотправитель_БАНК_Ркц
      Грузоотправитель_БАНК_Счет
      Грузоотправитель_БАНК_Счет_Ркц
      Грузоотправитель_БАНК_Счет_Плат
      Грузоотправитель_БАНК_Тип_Счета
      Грузоотправитель_БАНК_Вид_Счета   // 10 полей

  Грузополучатель                     // KatOrg.Name
  ГрузополучательКод                  // KatOrg.TipOrg
  Грузополучатель_Адрес               // KatOrg.Addr
  Грузополучатель_ОКПО                // KatOrg.OKPO
  Грузополучатель_ОКОНХ               // KatOrg.OKONH
  Грузополучатель_ТЕЛ                 // KatOrg.TEL
  Грузополучатель_КонтИнф             // KatOrg.CONTAKTS      Контактная информация
  Грузополучатель_Email               // KatOrg.EMAIL         Электронный почтовый адрес
  Грузополучатель_OKATO               // PodrInfo.OKATO       Код по общероссийскому классификатору административно-территориального деления
  Грузополучатель_KBK                 // PodrInfo.KBK         Код бюджетной классификации
  Грузополучатель_OGRN                // PodrInfo.OGRN        Основной государственный регистрационный номер
  Грузополучатель_РегНом_в_ПФ         // PodrInfo.REGNOMPFR   Регистрационный номер в ПФ
  Грузополучатель_РегНом_Страхователя // PodrInfo.POlE3S      Регистрационный номер страхователя
  Грузополучатель_Орган_Исполн_Власти // PodrInfo.INSNAME     Орган исполнительной власти
  Грузополучатель_Форма_Собственности // FormSobs.Name        Форма собственности
  Грузополучатель_Вид_Деятельности    // FormSobs.VidD        Вид деятельности 
  Грузополучатель_СТАРАНА_КОД         // KatState.KOD
  Грузополучатель_СТРАНА_ИМЯ          // KatState.Name
  Грузополучатель_СТРАНА_НАЛОГИ       // KatState.IsNal
  Грузополучатель_ГОРОД_КОД           // KatCity.KOD
  Грузополучатель_ГОРОД_ИМЯ           // KatCity.Name
  Грузополучатель_ГОРОД_ТЕЛ           // KatCity.TEL
  Грузополучатель_ГОРОД_СТРАНА_КОД    // KatState.KOD
  Грузополучатель_ГОРОД_СТРАНА_ИМЯ    // KatState.Name
  Грузополучатель_ГОРОД_СТРАНА_НАЛОГИ // KatState.IsNal
  Грузополучатель_КОРПОРАЦИЯ          // KatOrg.CorpoIn
  ГрузополучательУНН                  // KatOrg.UNN    
  ГрузополучательКПП                  // KatOrg.KODPLATNDS       =  28 ПОЛЕЙ
      Грузополучатель_БАНК_Имя
      Грузополучатель_БАНК_Коментарий
      Грузополучатель_БАНК_Адрес
      Грузополучатель_БАНК_Мфо
      Грузополучатель_БАНК_Ркц
      Грузополучатель_БАНК_Счет
      Грузополучатель_БАНК_Счет_Ркц
      Грузополучатель_БАНК_Счет_Плат
      Грузополучатель_БАНК_Тип_Счета
      Грузополучатель_БАНК_Вид_Счета   // 10 полей
  Плательщик                     // KatOrg.Name
  ПлательщикКод                  // KatOrg.TipOrg
  Плательщик_Адрес               // KatOrg.Addr
  Плательщик_ОКПО                // KatOrg.OKPO
  Плательщик_ОКОНХ               // KatOrg.OKONH
  Плательщик_ТЕЛ                 // KatOrg.TEL
  Плательщик_КонтИнф             // KatOrg.CONTAKTS      Контактная информация
  Плательщик_Email               // KatOrg.EMAIL         Электронный почтовый адрес
  Плательщик_OKATO               // PodrInfo.OKATO       Код по общероссийскому классификатору административно-территориального деления
  Плательщик_KBK                 // PodrInfo.KBK         Код бюджетной классификации
  Плательщик_OGRN                // PodrInfo.OGRN        Основной государственный регистрационный номер
  Плательщик_РегНом_в_ПФ         // PodrInfo.REGNOMPFR   Регистрационный номер в ПФ
  Плательщик_РегНом_Страхователя // PodrInfo.POlE3S      Регистрационный номер страхователя
  Плательщик_Орган_Исполн_Власти // PodrInfo.INSNAME     Орган исполнительной власти
  Плательщик_Форма_Собственности // FormSobs.Name        Форма собственности
  Плательщик_Вид_Деятельности    // FormSobs.VidD        Вид деятельности 
  Плательщик_СТАРАНА_КОД         // KatState.KOD
  Плательщик_СТРАНА_ИМЯ          // KatState.Name
  Плательщик_СТРАНА_НАЛОГИ       // KatState.IsNal
  Плательщик_ГОРОД_КОД           // KatCity.KOD
  Плательщик_ГОРОД_ИМЯ           // KatCity.Name
  Плательщик_ГОРОД_ТЕЛ           // KatCity.TEL
  Плательщик_ГОРОД_СТРАНА_КОД    // KatState.KOD
  Плательщик_ГОРОД_СТРАНА_ИМЯ    // KatState.Name
  Плательщик_ГОРОД_СТРАНА_НАЛОГИ // KatState.IsNal
  Плательщик_КОРПОРАЦИЯ          // KatOrg.CorpoIn
  ПлательщикУНН                  // KatOrg.UNN    
  ПлательщикКПП                  // KatOrg.KODPLATNDS       =  28 ПОЛЕЙ
      Плательщик_БАНК_Имя
      Плательщик_БАНК_Коментарий
      Плательщик_БАНК_Адрес
      Плательщик_БАНК_Мфо
      Плательщик_БАНК_Ркц
      Плательщик_БАНК_Счет
      Плательщик_БАНК_Счет_Ркц
      Плательщик_БАНК_Счет_Плат
      Плательщик_БАНК_Тип_Счета
      Плательщик_БАНК_Вид_Счета   // 10 полей

 Номер_накладной  Дескриптор_накладной Номер_с_дескриптором
 Дата_накладной:date На   Назначение КОД_СТРАНЫ_ПОСТАВЩИКА
 Основание ДатаОснования:date
 ВходимостьНалогов:word
 СчФакт_НРек СчФакт_Номер
 Склад Мол МОЛ_Должность
  номер_доверенности
  дата_доверенности:date
  доверенность_кому_выдана
  курс:double
  валюта
!.{
  спецификацияМЦ_нрек:comp
  Npp
 Код_Товара Масса:double МассаТары:double Объем:double SizeX:double SizeY:double SizeZ:double
 Ресурс_хранения Код_группы Название_группы Товар Единица УчЕдиница

 KatOtpEdKoef:double
 Kol:double
 Kolopl:double
 KolFact:double
 Плотность_топлива:double

 Кол_по_основанию:double Кол_факт:double КолУч:double Цена_нац:double Цена_вал:double
 Сим1 ISO Стоим_нац:double Стоим_вал:double Сим2
 НалогР1:double НалогВ1:double НалогР2:double НалогВ2:double
 НалогР3:double НалогВ3:double НалогР4:double НалогВ4:double
 НалогР5:double НалогВ5:double НалогР6:double НалогВ6:double
 НалогР_прочие:double НалогВ_прочие:double
 ставкаНДС:double суммаНДС:double
 Цена_нацБН:double Цена_нацСН:double Цена_валБН:double Цена_ВалСН:double
 Стоим_нацБН:double Стоим_нацСН:double Стоим_валБН:double Стоим_ВалСН:double
 Партия Цена_изготовителя Атрибут_Партии_Число:double
 ПроцентНаценки
 атрМЦ_1 атрМЦ_2 атрМЦ_3 атрМЦ_4 атрМЦ_5
!.}
!.{
  спецификацияУС_нрек:comp
 Код_Услуги Услуга
! Единица_услуги  // Удалено, т.к. неиспользуется
 Процент
 Стоим_усл_нац_БН:double Стои_усл_вал_БН:double
 Стоим_усл_нац:double Стои_усл_вал:double Сим4 ISO_USL
 АтрУс_1 АтрУс_2 АтрУс_3 АтрУс_4 АтрУс_5
!.}
 Сумма_нац:double Сумма_вал:double Сим5
 Сумма_нацБН:double Сумма_нацСН:double Сумма_валБН:double Сумма_ВалСН:double
 Информация Сум_усл_нац:double Сум_усл_вал:double Сим6
 Сум_усл_нацБН:double Сум_усл_нацСН:double Сум_усл_валБН:double
 Сум_усл_валСН:double
 СпецСимвол
.endfields
.{
НРек накладной ^
Количество_МЦ ^
Количество_Услуг ^

Получатель       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^
Поставщик        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^
Грузоотправитель ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^
Грузополучатель  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^
 Плательщик      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^ ^^^^^^^^^^

Номер накладной ^ Дескриптор_накладной ^ Номер_с_дескриптором ^
Дата накладной ^
На ^
Назначение ^ КОД_СТРАНЫ_ПОСТАВЩИКА ^
По документу основанию ^  От ^
ВходимостьНалогов ^

 СчФакт_НРек  ^
 СчФакт_Номер ^
 Склад ^ Мол ^ МОЛ_Должность ^

  номер_доверенности ^
  дата_доверенности ^
  доверенность_кому_выдана ^
  курс ^
  валюта ^
.{
 НРек спецификации МЦ ^
 Номер по порядку ^
 Номенклатурный номер ^ Масса ^ МассаТары ^ Объем ^ SizeX ^  SizeY ^ SizeZ ^
 Ресурс_хранения ^ Код_группы ^ Название_группы ^
 Наименование товара ^
 Единица измерения ^ УчЕдиница ^

 KatOtpEdKoef ^
 Kol ^
 Kolopl ^
 KolFact ^
 Плотность_топлива ^

 Количество по документу основанию ^
 Количество фактическое ^
 КолУч ^
 Цена в нац. ден. единице ^
 Цена в валюте ^ ^ ISO ^
 Стоимость в нац. ден. единице ^
 Стоимость в валюте ^ ^
 НалогР1 ^ НалогВ1 ^ НалогР2 ^ НалогВ2 ^
 НалогР3 ^ НалогВ3 ^ НалогР4 ^ НалогВ4 ^
 НалогР5 ^ НалогВ5 ^ НалогР6 ^ НалогВ6 ^
 НалогР_прочие ^ НалогВ_прочие ^
 ставкаНДС ^ суммаНДС ^
 Цена в национальной валюте без налогов ^
 Цена в национальной валюте с налогами ^
 Цена в валлюте без налогов ^
 Цена в валюте с налогами ^
 Стоимость в национальной валюте без налогов ^
 Стоимость в национальной валюте с налогами ^
 Стоимость в валюте без налогов ^
 Стоимость в валюте с налогами ^
 Партия товара ^  Цена_изготовителя ^ Атрибут_партии_число ^
 ПроцентНаценки ^
 атрМЦ_1 ^ атрМЦ_2 ^ атрМЦ_3 ^ атрМЦ_4 ^ атрМЦ_5 ^
.}
.{ PrihNkl_SopUsl CHECKENTER
 НРек спецификации услуги ^
 Код_Услуги ^
 Услуга ^
! Единица_услуги ^ // Удалено, т.к. неиспользуется
 Процент ^
 Стоим_усл_нац_БН ^ Стои_усл_вал_БН ^
 Стоим_усл_нац ^ Стои_усл_вал ^ ^ ISO_USL ^
 АтрУс_1 ^ АтрУс_2 ^ АтрУс_3 ^ АтрУс_4 ^ АтрУс_5 ^
.}
 Сумма по накладной в нац. ден. единице ^
 Сумма по накладной в валюте ^ ^
 Сумма_нацБН  ^ Сумма_нацСН ^ Сумма_валБН ^ Сумма_ВалСН ^
 Информация ^ Сум_усл_нац ^ Сум_усл_вал ^ Сим6 ^
 Сум_усл_нацБН ^ Сум_усл_нацСН ^ Сум_усл_валБН ^ Сум_усл_валСН ^
 СпецСимвол ^
.}
.endform



#doc
ПРИХОДНАЯ НАКЛАДНАЯ С РАСКРЫТИЕМ НАЛОГОВ
#end
.linkform 'prihnkl_02' prototype is 'prihnkl'
.NameInList 'ПРИХОДНАЯ НАКЛАДНАЯ С РАСКРЫТИЕМ НАЛОГОВ'
.defo landscape
.fields
 CommonFormHeader
 Номер_с_дескриптором Дата_накладной Поставщик
 if(номер_доверенности='','_________',номер_доверенности)
 if(дата_доверенности=date(0,0,0),'_____________г.',DateToStr(дата_доверенности,'DD mon YYYY г.'))
 доверенность_кому_выдана
 Основание
!.{
 Npp
 Код_Товара Товар Единица Кол_факт
 Цена_нацБН Цена_валБН Сим1 Цена_нацСН Цена_валСН Сим1
 Стоим_нацБН Стоим_валБН Сим2 Стоим_нацСН Стоим_валСН Сим2
!.}
!.{
 Код_Услуги Услуга Процент
 Стоим_усл_нац_БН Стои_усл_вал_БН Сим4
 Стоим_усл_нац Стои_усл_вал Сим4
!.}
 Сумма_нацБН Сумма_валБН Сим5
 Сумма_нацСН Сумма_валСН Сим5
 Информация
 Сум_усл_нацБН Сум_усл_валБН Сим6
 Сум_усл_нацСН Сум_усл_валСН Сим6
 СпецСимвол
.endfields
.{
 Ш^

 Щ              НАКЛАДНАЯ №  ^
                от ^ Б
 Ш
 Р Поставщик : @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
 Доверенность №  ^ от  ^ выдана  ^
 Основание : @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ И
 Ш───┬────────────────────┬──────────────────────────┬───────┬────────────┬─────────────────────────────┬─────────────────────────────────┬─────────────────────────────┬─────────────────────────────────
Nпп│Номенклатурный номер│    Наименование МЦ       │Ед.изм.│ Количество │      Цена без налогов       │        Цена с налогами          │    Стоимость без налогов    │     Стоимость с налогами
   │                    │                          │       │            ├──────────────┬──────────────┼────────────────┬────────────────┼──────────────┬──────────────┼────────────────┬────────────────
   │                    │                          │       │            │ в нац.ден.ед.│  в валюте    │  нац. ден. ед. │  в валюте      │ в нац.ден.ед.│    валюте    │ в нац. ден. ед.│  в валюте
───┴────────────────────┴──────────────────────────┴───────┴────────────┴──────────────┴──────────────┴────────────────┴────────────────┴──────────────┴──────────────┴────────────────┴────────────────
.{
@@@ @@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@ &&&&&&&&&&&& &&&&&&&&&&&&&& &&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&& @@@@ &&&&&&&&&&&&&& &&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.}

.{ PrihNkl_SopUsl CHECKENTER
    @@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@         &&&&&&&&&&&&                                                                 &&&&&&&&&&&&&& &&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.}
────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 БИтого по накладной :                                                                                                                &&&&&&&&&&&&&&&& &&&&&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.{?Internal;Информация<>''
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                                                                              &&&&&&&&&&&&&&&& &&&&&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.} Щ
 ^
.}
.endform


#doc
НАКЛАДНАЯ НА ПОЛУЧЕНИЕ МАТЦЕННОCТЕЙ
#end
.linkform 'prihnkl_01' prototype is 'prihnkl'
.NameInList 'НАКЛАДНАЯ НА ПОЛУЧЕНИЕ МАТЦЕННОCТЕЙ'
.defo portrait
.fields
 CommonFormHeader
 Номер_с_дескриптором Дата_накладной Поставщик
 if(номер_доверенности='','_________',номер_доверенности)
 if(дата_доверенности=date(0,0,0),'_____________г.',DateToStr(дата_доверенности,'DD mon YYYY г.'))
 доверенность_кому_выдана
 Основание
!.{
 Npp
 Код_Товара Товар Единица Кол_факт Цена_нац Цена_вал Сим1 Стоим_нац Стоим_вал Сим2
!.}
!.{
 Код_Услуги Услуга Процент
 Стоим_усл_нац_БН Стои_усл_вал_БН Сим4
!.}
 Сумма_нац Сумма_вал Сим5
 Информация Сум_усл_нац Сум_усл_вал Сим6
 СпецСимвол
.endfields
.{
 Ш^

              ЩНАКЛАДНАЯ №  ^ Щ
              Шот ^ Ш

 Р  БПоставщик : Щ ^ Ш
  БДоверенность №  Щ ^  Ш Бот  Щ ^  Ш Бвыдана  Щ ^ Ш
  БОснование : Щ ^ И
 И───┬────────────────────┬──────────────────────────┬───────┬────────────┬──────────────┬──────────────┬────────────────┬───────────────
Nпп│Номенклатурный номер│    Наименование МЦ       │Ед.изм.│ Количество │  Цена в нац. │    Цена в    │  Стоимость в   │  Стоимость
   │                    │                          │       │            │ ден. единице │    валюте    │  нац. ден. ед. │  в валюте
───┴────────────────────┴──────────────────────────┴───────┴────────────┴──────────────┴──────────────┴────────────────┴───────────────
.{
@@@ @@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@ @@@@@@@ &&&&&&&&&&&& &&&&&&&&&&&&&& &&&&&&&&& @@@@ &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.}

.{ PrihNkl_SopUsl CHECKENTER
.begin
 if (ВходимостьНалогов=1)
  begin
   Стоим_усл_нац_БН:=Стоим_усл_нац;
   Стои_усл_вал_БН:=Стои_усл_вал;
  end
end.
    @@@@@@@@@@@@@@@@@@@@ @@@@@@@@@@@@@@@@@@@@@@@@@@         &&&&&&&&&&&&                               &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.}
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
 БИтого по накладной :                                                                                   &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.{?Internal;Информация<>''
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@                                                                 &&&&&&&&&&&&&&&& &&&&&&&&&&&& ^
.} Б
 Р А
 ^
.}
.endform

#ifdef GAL5_80
!===============================================================================
!
#doc
Учетная карточка импортируемых товаров
#end
.linkform 'prihnkl_03' prototype is 'prihnkl'
.NameInList 'Учетная карточка импортируемых товаров'
.create view loKS
var
  cKatSopr     : comp;
  cBaseDocNRec : comp;
from
    KatSopr
  , SpSopr
  , BaseDoc
  , KlVal
#ifndef GAL5_80
  , SystDate
#end
  , synonym KatOrg Pol
  , synonym KatBank BankPol
  , KatOtpEd
where
((
                cKatSopr == KatSopr.NRec
and         KatSopr.Nrec == SpSopr.cSopr
and       SpSopr.cSpStep == SpStep.NRec
and      SpStep.cStepDoc == StepDoc.NRec
and     StepDoc.cBaseDoc == BaseDoc.NRec
#ifndef GAL5_80
and   SystDate.NRecMyOrg == Pol.NRec
#else
and   coGetTune('MyOrg') == Pol.NRec
#end
and      BaseDoc.cMyBank == BankPol.NRec
and        SpSopr.cOtpEd == KatOtpEd.NRec

))
;
.var
  PSINum: string
  FormRasc: string
.endvar
.begin
  loKS.cKatSopr := накладная_нрек;
  if (loKS.GetFirst KatSopr = 0) then {
    var ExAttr : iExtAttr;
    var ExClass: iExtClass;
    var cAttrNam : comp;
    var wTypeAttr: word;
    cBaseDocNRec:=loKS.BaseDoc.NRec;

    GetVipInterface(ExAttr);
    GetVipInterface(ExClass);

    // ПС
    PSINum := ExAttr.sGetAttr(coBaseDoc, cBaseDocNRec, 'Паспорт сделки (ПС)');

    //форма расчетов
    wTypeAttr := ExClass.GetClassCode(coBaseDoc, 'Форма расчетов');
    if (wTypeAttr<>0)
    {
      FormRasc := ExClass.GetSegName(wTypeAttr, cBaseDocNRec);
      if (Length(FormRasc) > 2) then FormRasc:=SubStr(FormRasc,1,2);
    }
    else
     FormRasc:='';

    FreeVipInterface(ExAttr);
    FreeVipInterface(ExClass);
  };
end.
.fields
  CommonFormHeader
  '' PSINum ''
  loKS.BankPol.Schet1 loKS.Pol.Name
  loKS.Pol.OKPO Основание
  ДатаОснования Номер_накладной loKS.SpSopr.dOprTTN
  Код_Товара Npp Стоим_вал
  ISO FormRasc Кол_факт loKS.KatOtpEd.bKod
  СпецСимвол
.endfields
.{
^

.{
.begin
  if (loKS.GetFirst SpSopr where ((спецификацияМЦ_нрек==SpSopr.NRec))=0) {}
end.
                        БУЧЕТНАЯ КАРТОЧКА ИМПОРТИРУЕМЫХ ТОВАРОВ Б
 И┌──────────┬───┬────────────────────────────────────────────────┬────┬───────────────────┐
│ №  Б@@@@@@ Б │   │ ПСи- Б@@@@@@@@@@@@@@@@@@@@@@@@@ Б                  │    │ КС -  Б@@@@@@@@@@ Б   │
├──────────┴───┴─────────────────┬──────────────────────────────┴────┴───────────────────┤
│ В.сч. -  Б@@@@@@@@@@@@ Б           │ Импортер -  Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Б │
├──────────────────────┬─────────┴───────────────────────────────────────────────────────┤
│ ОКПО -  Б@@@@@@@@ Б      │ Контракт №  Б@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@ Б                      │
├──────────────────────┼─────────────────────────────────────────┬───────────────────────┤
│ Дата -  Б@@@@@@@@@@ Б    │ ГТД -  Б@@@@@@@@@@@@@@@@@@@ Б               │ Дата В. -  Б@@@@@@@@@@ Б  │
├───┬──────────────────┴──────────┬──────────────────┬───────────┴────────────┬──────────┤
│   │ Товар -  Б@@@@@@@@@ Б           │                  │                        │          │
├───┼──┬──┬──┬──┬──┬──┬──┬──┬──┬──┤Номер товара -  Б@@ Б │Сумма Т -  Б&&&&&&&&&&&&&& Б├──────────┤
│   │  │  │  │  │  │  │  │  │  │  │                  │                        │          │
├───┴──┴──┴┬─┴──┴──┼──┴──┼──┴──┴──┴──────────────────┴───────┬────────────────┴──────────┤
│Информация│  КВ   │  ФР │ Количество товара                 │ Единица измерения         │
│          ├───────┼─────┼───────────────────────────────────┼───────────────────────────┤
│ о товаре │  Б@@@ Б   │   Б@@ Б │  Б&&&&&&&&&&&&&&&& Б                  │  Б@@@@@@@@@@ Б                │
├──────────┴───────┴─────┴───────────────────────────────────┴───────────────────────────┤
│ Особые отметки _______________________________________________________________________ │
│ ______________________________________________________________________________________ │
└────────────────────────────────────────────────────────────────────────────────────────┘
                                                            М.П.             И.О.Фамилия И






.}
.{ PrihNkl_SopUsl CHECKENTER
.}
 ^
.}
.endform
#end  //GAL5_80

#include torg_12p.FRN
#ifdef __UKS2__
#include prih_uks.FRN
#end