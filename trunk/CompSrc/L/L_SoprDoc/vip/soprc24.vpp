//********************************************************************************
//                                                        (c) корпорация Галактика
// Галактика 7.12 - _
// _
//********************************************************************************

// ╔══════════════════════════════════════════════════════════════╗
// ║ Установка фильтров на документ в заданном диапазоне          ║
// ╚══════════════════════════════════════════════════════════════╝

Procedure SetDateFlt;
var aBegDate, aEndDate: Date;
{
  ReadMyDsk(aBEGdate, 'aBEGdate_', FALSE);
  ReadMyDsk(aENDdate, 'aENDdate_', FALSE);

  if (RunDialog(GetInterval, abegdate, aenddate) <> cmCancel)
    {
      if (abegdate > aenddate)
        {
          Message('Начальная дата фильтра больше конечной. Фильтр не изменен...', Information);
          Exit;
        }
      begdate := abegdate;
      enddate := aenddate;
      if not BoundActive(tbdMainBound)
        AddBounds(tbdMainBound);
    }
  else
    if (BoundActive(tbdMainBound))
      if (Message('Снять установленный фильтр?', YesNo) = cmYes)
        SubBounds(tbdMainBound);

  SaveMyDsk(aBEGdate, 'aBEGdate_');
  SaveMyDsk(aENDdate, 'aENDdate_');

  RereadRecord(#KatSopr);

  if not IsValid(#KatSopr)
    Message('Нет записей в установленном диапазоне!');
}

Procedure SetOrgFlt;
{
  if (Kontragent = comp(0))
    PushBounds(tbMainBound)
  else
    {
      PushBounds(tbFltOrg);
      if (GetFirst KatSopr <> tsOk)
        {
           PopBounds(tbFltOrg);
           PushBounds(tbMainBound)
        }
    }

}
